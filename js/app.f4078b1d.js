(function(){"use strict";var t={6451:function(t,e,i){var n=i(9242),s=i(4749),r=(i(6510),i(3396));function l(t,e,i,n,s,l){const o=(0,r.up)("page-show");return(0,r.wg)(),(0,r.j4)(o)}var o=i(7139);const u=t=>((0,r.dD)("data-v-b365ac56"),t=t(),(0,r.Cn)(),t),a={class:"common-layout"},h=u((()=>(0,r._)("p",null,[(0,r._)("b",null,"请求调页存储管理方式模拟")],-1))),_=(0,r.Uk)("单步执行"),d=(0,r.Uk)("重置"),c=(0,r.Uk)("自动执行"),m=u((()=>(0,r._)("label",null," s/条",-1))),p=u((()=>(0,r._)("span",null,[(0,r._)("b",null,"内存")],-1))),f={class:"memoryboard"},b={class:"buttonbox"},x={class:"buttonlabel"},g={class:"buttonlabel"},y={class:"info"},v=u((()=>(0,r._)("tr",null,[(0,r._)("th",null,"已执行条数"),(0,r._)("th",null,"缺页数"),(0,r._)("th",null,"当前缺页率")],-1)));function w(t,e,i,n,s,l){const u=(0,r.up)("el-button"),w=(0,r.up)("el-input-number"),k=(0,r.up)("el-header"),W=(0,r.up)("el-table-column"),M=(0,r.up)("el-table"),U=(0,r.up)("el-scrollbar"),L=(0,r.up)("el-aside"),R=(0,r.up)("el-main"),O=(0,r.up)("el-container");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(O,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{class:"header",height:"90px"},{default:(0,r.w5)((()=>[h,(0,r.Wm)(u,{type:"success",plain:"",disabled:this.exe_num==this.instruction_num||this.run_continuously,onClick:l.exe_next},{default:(0,r.w5)((()=>[_])),_:1},8,["disabled","onClick"]),(0,r.Wm)(u,{type:"success",plain:"",onClick:this.flash},{default:(0,r.w5)((()=>[d])),_:1},8,["onClick"]),(0,r.Wm)(u,{type:"success",plain:"",disabled:this.exe_num==this.instruction_num||this.run_continuously,onClick:l.run_auto},{default:(0,r.w5)((()=>[c])),_:1},8,["disabled","onClick"]),(0,r.Wm)(w,{modelValue:this.interval,"onUpdate:modelValue":e[0]||(e[0]=t=>this.interval=t),precision:2,step:.1,max:2,min:.1,"controls-position":"right"},null,8,["modelValue","step","min"]),m])),_:1}),(0,r.Wm)(O,null,{default:(0,r.w5)((()=>[(0,r.Wm)(L,{class:"aside"},{default:(0,r.w5)((()=>[p,(0,r._)("div",f,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.physical_memory,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r._)("span",b,[(0,r._)("label",x,(0,o.zw)(t.id),1),(0,r.Wm)(u,{type:"success",disabled:"",class:"m_button"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.content),1)])),_:2},1024),(0,r._)("label",g,"start_addr: "+(0,o.zw)(t.start_addr),1)])])))),128))]),(0,r._)("div",y,[(0,r._)("table",null,[v,(0,r._)("tr",null,[(0,r._)("td",null,(0,o.zw)(this.exe_num),1),(0,r._)("td",null,(0,o.zw)(this.page_miss),1),(0,r._)("td",null,(0,o.zw)(l.MissRate),1)])])]),(0,r.Wm)(U,{id:"scheInfo"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{data:this.schedule_record,height:"293"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{prop:"page_in",label:"调入逻辑页"}),(0,r.Wm)(W,{prop:"dst_block",label:"调至内存块"}),(0,r.Wm)(W,{prop:"page_out",label:"调出逻辑页"})])),_:1},8,["data"])])),_:1})])),_:1}),(0,r.Wm)(R,{class:"main"},{default:(0,r.w5)((()=>[(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(M,{data:this.instruction_record,height:"500"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{prop:"cur_id",label:"指令id"}),(0,r.Wm)(W,{prop:"process_page",label:"逻辑页号"}),(0,r.Wm)(W,{prop:"inMemory",label:"所在内存块号"}),(0,r.Wm)(W,{prop:"memory_addr",label:"所在内存地址"}),(0,r.Wm)(W,{prop:"next_id",label:"下一条指令id"})])),_:1},8,["data"])])),_:1})])),_:1})])),_:1})])),_:1})])}class k{constructor(){this.item=0,this.next=null}length(){return this.item}append(t){let e=this;while(null!=e.next)e=e.next;e.next=new k,e.next.item=t,this.item++}deleteLast(){if(0==this.length())return;let t=this;while(null!=t.next.next)t=t.next;let e=t.next.item;return t.next=null,this.item--,e}findIndex(t){let e=this.next;for(let i=1;null!=e;++i){if(e.item==t)return i;e=e.next}return-1}movetoHead(t){if(t>this.length()||0==t)return!1;let e=this;for(let n=0;n<t-1;n++)e=e.next;let i=e.next;return e.next=i.next,i.next=this.next,this.next=i,!0}insertHead(t){let e=this.next;this.next=new k,this.next.item=t,this.next.next=e,this.item++}}var W=k,M={name:"PageShow",data(){return{run_continuously:!1,interval:.5,timer:null,exe_num:0,page_miss:0,LRUlist:new W,exe_order:[],mem_block_num:4,process_page_num:32,instruction_num:320,physical_memory:[],page_table:[],instruction_record:[],schedule_record:[]}},computed:{MissRate(){return 0==this.exe_num?"0%":(this.page_miss/this.exe_num*100).toFixed(2)+"%"}},methods:{flash(){this.run_continuously=!1,this.interval=.5,null!=this.timer&&clearInterval(this.timer),this.timer=null,this.exe_num=0,this.page_miss=0,this.LRUlist=new W,this.exe_order=[],this.physical_memory=[],this.page_table=[],this.instruction_record=[],this.schedule_record=[],this.memory_init(),this.pagetable_init(),this.order_init()},memory_init(){let t=Math.floor(5*Math.random());for(let e=0;e<this.mem_block_num;++e)this.physical_memory.push({id:e,start_addr:e+t+"0",length:10,content:"null"})},pagetable_init(){for(let t=0;t<this.process_page_num;++t)this.page_table.push({id:t,valid:!1,memory_id:null})},order_init(){let t=Math.floor(Math.random()*(this.instruction_num-1)),e=0;this.exe_order.push(t),e++,this.exe_order.push(t+1),e++;while(e<this.instruction_num){if(t=Math.floor(Math.random()*t),this.exe_order.push(t),e++,e==this.instruction_num)return;if(this.exe_order.push(t+1),e++,e==this.instruction_num)return;if(t=Math.floor(Math.random()*(this.instruction_num-t-4)+t+2),this.exe_order.push(t),e++,e==this.instruction_num)return;if(this.exe_order.push(t+1),e++,e==this.instruction_num)return}},instruct_record_update(t){let e=Math.floor(t/10),i=this.page_table[e].valid;if(0==i)this.instruction_record.push({cur_id:t,process_page:e,inMemory:"null",memory_addr:"null",next_id:this.exe_order[this.exe_num+1]});else{let i=this.page_table[e].memory_id,n=parseInt(this.physical_memory[i].start_addr,10)+t%10;this.instruction_record.push({cur_id:t,process_page:e,inMemory:i,memory_addr:n,next_id:this.exe_order[this.exe_num+1]})}},run_auto(){if(1==this.run_continuously){if(this.exe_num==this.instruction_num)return this.run_continuously=!1,void(null!=this.timer&&(clearInterval(this.timer),this.timer=null));this.exe_next()}else this.run_continuously=!0,this.timer=setInterval(this.run_auto,1e3*this.interval)},exe_next(){let t=this.exe_order[this.exe_num],e=Math.floor(t/10),i=this.page_table[e];if(0==i.valid){this.instruct_record_update(t),console.log(111),this.page_miss++;let n=this.LRU(i);this.schedule_record.push(n),this.page_table[e].valid=!0,this.page_table[e].memory_id=n.dst_block,this.instruct_record_update(t),"null"!=n.page_out&&(this.page_table[n.page_out].valid=!1,this.page_table[n.page_out].memory_id="null")}else this.LRUlist.movetoHead(this.LRUlist.findIndex(i.memory_id)),this.instruct_record_update(t);this.exe_num++},LRU(t){if(!(this.LRUlist.length()<this.mem_block_num)){let e=this.LRUlist.deleteLast(),i=this.physical_memory[e].content;return this.physical_memory[e].content=t.id,this.LRUlist.insertHead(e),{page_in:t.id,dst_block:e,page_out:i}}for(let e=0;e<this.mem_block_num;++e)if("null"==this.physical_memory[e].content)return this.physical_memory[e].content=t.id,this.LRUlist.insertHead(e),{page_in:t.id,dst_block:e,page_out:"null"}}},created(){this.memory_init(),this.pagetable_init(),this.order_init()}},U=i(89);const L=(0,U.Z)(M,[["render",w],["__scopeId","data-v-b365ac56"]]);var R=L,O={name:"App",components:{PageShow:R}};const C=(0,U.Z)(O,[["render",l]]);var I=C;const j=(0,n.ri)(I);j.use(s.Z),j.mount("#app")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,r){if(!n){var l=1/0;for(h=0;h<t.length;h++){n=t[h][0],s=t[h][1],r=t[h][2];for(var o=!0,u=0;u<n.length;u++)(!1&r||l>=r)&&Object.keys(i.O).every((function(t){return i.O[t](n[u])}))?n.splice(u--,1):(o=!1,r<l&&(l=r));if(o){t.splice(h--,1);var a=s();void 0!==a&&(e=a)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[n,s,r]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,r,l=n[0],o=n[1],u=n[2],a=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(u)var h=u(i)}for(e&&e(n);a<l.length;a++)r=l[a],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(h)},n=self["webpackChunkmemoryscheduling"]=self["webpackChunkmemoryscheduling"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(6451)}));n=i.O(n)})();
//# sourceMappingURL=app.f4078b1d.js.map